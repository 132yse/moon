/**
 * Moon v0.11.0
 * Copyright 2016-2017 Kabir Shah
 * Released under the MIT License
 * http://moonjs.ga
 */
!function(e,t){"undefined"==typeof module?e.Moon=t():module.exports=t()}(this,function(){"use strict";function e(){this.target=void 0,this.cache={},this.map={}}function t(t){void 0===t&&(t={}),this.options=t,v(this,"name",t.name,"Root"),this.root=void 0;var n=t.data;this.data=void 0===n?{}:"function"==typeof n?n():n;var r=t.methods;this.methods={},void 0!==r&&x(this,r),v(this,"compiledRender",t.render,c),v(this,"hooks",t.hooks,{}),this.events={},this.dom={},this.observer=new e,this.queued=!0;var i=t.computed;void 0!==i&&w(this,i),this.init()}var n={},r={},i={},o=function(e){!1===t.config.silent&&console.log(e)},a=function(e){!1===t.config.silent&&console.error("[Moon] ERROR: "+e)},s=function(e){!1===e.queued&&(e.queued=!0,setTimeout(function(){e.build(),e.queued=!1,d(e,"updated")},0))},d=function(e,t){var n=e.hooks[t];void 0!==n&&n.call(e)},v=function(e,t,n,r){e[t]=void 0===n?r:n},c=function(){},u=function(e,t){for(var n in t)!function(n){var r=function(e){for(var t=r.handlers,n=0;n<t.length;n++)t[n](e)};r.handlers=t[n],t[n]=r,e.addEventListener(n,r)}(n)},f=function(e){var t,n=e.type,r=e.data;if("#text"===n)t=document.createTextNode(e.value);else{var i=e.children;t=1===r.SVG?document.createElementNS("http://www.w3.org/2000/svg",n):document.createElement(n);for(var o=0;o<i.length;o++)p(i[o],t);var a=r.events;void 0!==a&&u(t,a),m(t,{},e,e.props)}return r.node=t,t},p=function(e,t){var n=e.data.component;if(void 0===n)t.appendChild(f(e));else{var r=document.createElement(e.type);t.appendChild(r),h(r,e,n)}},l=function(e,t,n,r){if("#text"===e)return{type:e,value:n,data:t};var o=i[e];return void 0!==o&&(n.component=o),{type:e,props:t,data:n,children:r}};l.emptyVNode=l("#text",{},""),l.renderClass=function(e){if("string"==typeof e)return e;var t="",n="";if(Array.isArray(e))for(var r=0;r<e.length;r++)t+=n+l.renderClass(e[r]),n=" ";else if("object"==typeof e)for(var i in e)!0===e[i]&&(t+=n+i,n=" ");return t},l.renderLoop=function(e,t){var n;if(Array.isArray(e)){var r=e.length;n=new Array(r);for(var i=0;i<r;i++)n[i]=t(e[i],i)}else if("object"==typeof e){n=[];for(var o in e)n.push(t(e[o],o))}else if("number"==typeof e){n=new Array(e);for(var a=0;a<e;a++)n[a]=t(a+1,a)}return n};var h=function(e,t,n){var r=n.options.props,i=t.props.attrs,o={};if(void 0!==r)for(var a=0;a<r.length;a++){var s=r[a];o[s]=i[s]}var d={root:e,props:o,insert:t.children},v=t.data.events;d.events=void 0===v?{}:v;var c=new n.CTor(d),u=t.data;u.component=c,u.node=c.root},m=function(e,t,r,i){var o=i.attrs;for(var a in o){var s=o[a],d=t[a];!1===s||void 0!==d&&s===d||("xlink:href"===a?e.setAttributeNS("http://www.w3.org/1999/xlink","href",s):e.setAttribute(a,!0===s?"":s))}for(var v in t){var c=o[v];void 0!==c&&!1!==c||e.removeAttribute(v)}var u=i.directives;if(void 0!==u)for(var f in u){var p=n[f];void 0!==p&&p(e,u[f],r)}var l=i.dom;if(void 0!==l)for(var h in l)e[h]=l[h]},y=function(e,t){for(var n in e)t[n].handlers=e[n]},g=function(e,t){var n=t.data;n.node=e;for(var r=t.props,i=e.attributes,o={},a=0;a<i.length;a++){var s=i[a];o[s.name]=s.value}m(e,o,t,r);var d=n.events;void 0!==d&&u(e,d);var v=r.dom;if(void 0===v||void 0===v.innerHTML&&void 0===v.textContent)for(var c=t.children,l=c.length,y=0,b=y===l?void 0:c[y],x=e.firstChild;void 0!==b||null!==x;){if(null===x)p(b,e);else{var w=x.nextSibling;if(void 0===b)e.removeChild(x);else{var C=b.data.component;if(void 0!==C)h(x,b,C);else{var G=b.type;x.nodeName.toLowerCase()!==G?e.replaceChild(f(b),x):"#text"===G?(x.textContent=b.value,b.data.node=x):g(x,b)}}x=w}b=++y<l?c[y]:void 0}},b=function(e,t){var n=t.data,r=n.node,i=e.props;m(r,t.props.attrs,e,i),t.props=i;var o=e.data.events;void 0!==o&&y(o,n.events);for(var a=e.children,s=t.children,v=a.length,c=s.length,u=v>c?v:c,l=0;l<u;l++)if(l>=v){var g=s.pop().data,x=g.component;void 0!==x&&x.destroy(),r.removeChild(g.node)}else if(l>=c)p(s[l]=a[l],r);else{var w=a[l],C=s[l],G=w.type;if(G!==C.type){var O=C.data,k=O.component;void 0!==k&&k.destroy();var A=w.data.component;void 0===A?r.replaceChild(f(w),O.node):h(O.node,w,A),s[l]=w}else if(w!==C){var S=C.data,N=S.component;if(void 0!==N){var T=!1,q=N.options.props;if(void 0!==q){for(var R=w.props.attrs,V=N.observer,j=N.data,E=0;E<q.length;E++){var L=q[E];j[L]=R[L],V.notify(L)}T=!0}var z=w.data.events;void 0!==z&&y(z,S.events);var M=w.children;0!==M.length&&(N.insert=M,T=!0),!0===T&&(N.build(),d(N,"updated"))}else if("#text"===G){var Z=w.value;S.node.textContent=Z,C.value=Z}else b(w,C)}}},x=function(e,t){var n=e.methods;for(var r in t)!function(r){n[r]=function(){return t[r].apply(e,arguments)}}(r)},w=function(e,t){var n=e.data,r=e.observer;for(var i in t)!function(i){var o=t[i],a=o.get,s=o.set;Object.defineProperty(n,i,{get:function(){var t;return void 0===r.cache[i]?(r.target=i,t=a.call(e),r.target=void 0,r.cache[i]=t):t=r.cache[i],t},set:void 0===s?c:function(t){s.call(e,t)}})}(i)};e.prototype.notify=function(e){var t=this,n=this.map[e];if(void 0!==n)for(var r=0;r<n.length;r++)t.notify(n[r]);var i=this.cache;void 0!==i[e]&&(i[e]=void 0)};var C=/\{\{\s*/,G=/\s*\}\}/,O=/[\s\n]/,k=/[\s\n]/g,A=/<\/?(?:[A-Za-z]+\w*)|<!--/,S=/"[^"]*"|'[^']*'|\d+[a-zA-Z$_]\w*|\.[a-zA-Z$_]\w*|[a-zA-Z$_]\w*:|([a-zA-Z$_]\w*)(?:\s*\()?/g,N=/(?:(?:&(?:lt|gt|quot|amp);)|"|\\|\n)/g,T={"&lt;":"<","&gt;":">","&quot;":'\\"',"&amp;":"&","\\":"\\\\",'"':'\\"',"\n":"\\n"},q=["true","false","undefined","null","NaN","typeof","in","event"],R=["area","base","br","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],V=["animate","circle","clippath","cursor","defs","desc","ellipse","filter","font-face","foreignObject","g","glyph","image","line","marker","mask","missing-glyph","path","pattern","polygon","polyline","rect","svg","switch","symbol","text","textpath","tspan","use","view"],j=function(e,t,n){for(var r,i=n.props,o=n.methods,a=!1;null!==(r=S.exec(e));){var s=r[0],d=r[1];void 0!==d&&-1===t.indexOf(d)&&("("===s[s.length-1]?-1===o.indexOf(d)&&o.push(d):-1===i.indexOf(d)&&(i.push(d),a=!0))}return a},E=function(e,t,n){var r=e.length,i=0,o=!1,a="";if(0===r)a='""';else for(;i<r;){var s=e.substring(i),d=s.match(C);if(null===d){a+='"'+s+'"';break}var v=d.index;0!==v&&(a+='"'+s.substring(0,v)+'"',i+=v),o=!0,0!==i&&(a+=" + "),i+=d[0].length;var c=e.substring(i),u=c.match(G),f=u.index,p=c.substring(0,f);j(p,t,n),a+="("+p+")",(i+=p.length+u[0].length)!==r&&(a+=" + ")}return{output:a,dynamic:o}},L=function(e){for(var t=e.length,n=[],r=0;r<t;){var i=e[r];if("<"===i)if(r++,"!--"===e.substring(r,r+3)){r+=3;var o=e.indexOf("--\x3e",r);r=-1===o?t:o+3}else{var a={type:"Tag",value:""},s="",d={},v=!1,c=!1;for("/"===(i=e[r])&&(i=e[++r],v=!0);r<t&&">"!==i&&"/"!==i&&!1===O.test(i);)s+=i,i=e[++r];for(;r<t&&">"!==i&&("/"!==i||">"!==e[r+1]);)if(!0===O.test(i))i=e[++r];else{for(var u="",f="";r<t&&"="!==i&&!1===O.test(i)&&">"!==i&&("/"!==i||">"!==e[r+1]);)u+=i,i=e[++r];if("="===i){var p=" ";for('"'!==(i=e[++r])&&"'"!==i&&" "!==i&&"\n"!==i||(p=i,i=e[++r]);r<t&&">"!==i&&("/"!==i||">"!==e[r+1]);){if(i===p){i=e[++r];break}f+=i,i=e[++r]}}var l={name:u,value:f,arg:void 0,data:{}},h=u.split(":");2===h.length&&(l.name=h[0],l.arg=h[1]),d[u]=l}"/"===i?(r+=2,c=!0):r++,a.value=s,a.attributes=d,a.closeStart=v,a.closeEnd=c,n.push(a)}else{var m=e.substring(r),y=m.search(A),g=void 0;-1===y?(g=m,r=t):(g=m.substring(0,y),r+=y),0!==g.replace(k,"").length&&n.push({type:"Text",value:g.replace(N,function(e){return T[e]})})}}return n},z=function(e){for(var t={type:"ROOT",props:{},children:[]},n=[t],r=0,i=0;i<e.length;i++){var o=e[i];if("Text"===o.type)n[r].children.push(o.value);else if("Tag"===o.type)if(!0===o.closeStart)n.pop(),r--;else{var a=o.value,s={type:a,props:{attrs:o.attributes},children:[]};n[r].children.push(s),!1===o.closeEnd&&-1===R.indexOf(a)&&(-1!==V.indexOf(a)&&(s.SVG=!0),n.push(s),r++)}}return t.children[0]},M=function(e,t){return e.substring(0,e.length-2)+t},Z=function(e,t,n,i){var o,a,s,d=e.props.attrs,v=!1,c=!1,u=!1,f=[],p='{"attrs": {';for(o in d){var l=d[o],h=l.name;void 0!==(a=r[h])&&void 0!==(s=a.beforeGenerate)&&s(l,e,t,i)}var m,y;for(o in d){var g=d[o],b=g.name;if(void 0!==(a=r[b])){if(void 0!==(m=a.afterGenerate)&&(n[b]={prop:g,afterGenerate:m}),void 0!==(y=a.duringPropGenerate)){var x=y(g,e,t,i);0!==x.length&&(c=!0,p+=x)}}else if("m"===b[0]&&"-"===b[1])u=!0,v=!0,f.push(g);else{var w=g.value,C=E(w,i.exclude,i.dependencies);!0===C.dynamic&&(v=!0),c=!0,p+='"'+o+'": '+C.output+", "}}if(!1===i.static&&!0===v&&(e.data.dynamic=1),!0===c?p=M(p,"}"):p+="}",!0===u){p+=', "directives": {';for(var G=0;G<f.length;G++){var O=f[G],k=O.value;j(k,i.exclude,i.dependencies),p+='"'+O.name+'": '+(0===k.length?'""':k)+", "}p=M(p,"}")}var A=e.props.dom;if(void 0!==A){p+=', "dom": {';for(var S in A)p+='"'+S+'": '+A[S]+", ";p=M(p,"}")}return p+="}, "},$=function(e){var t='"events": {';for(var n in e){var r=e[n];t+='"'+n+'": [';for(var i=0;i<r.length;i++)t+=r[i]+", ";t=M(t,"], ")}return t=M(t,"}, ")},_=function(e){var t="{",n=!1;for(var r in e)t+="events"===r?$(e[r]):'"'+r+'": '+e[r]+", ",n=!0;return!0===n?t=M(t,"}, "):t+="}, ",t},I=function(e,t,n,r){if("string"==typeof e){var i=E(e,r.exclude,r.dependencies),o={};return!1===r.static&&(!0!==i.dynamic&&!0!==r.dynamic||(o.dynamic=1,t.data.dynamic=1)),'m("#text", '+_(o)+i.output+")"}if("m-insert"===e.type)return!1===r.static&&(t.data.dynamic=1),t.deep=!0,"instance.insert";var a='m("'+e.type+'", ';r.index=n;var s={};e.data=s,!1===r.static&&!0===r.dynamic&&(s.dynamic=1),!0===e.SVG&&(s.SVG=1);var d={},v=Z(e,t,d,r),c=e.children,u="[";if(0===c.length)u+="]";else{for(var f=0;f<c.length;f++)u+=I(c[f],e,f,r)+", ";u=M(u,"]")}!0===e.deep&&(u="[].concat.apply([], "+u+")"),1===s.dynamic&&void 0!==t&&(t.data.dynamic=1),a+=v,a+=_(s),a+=u,a+=")";for(var p in d){var l=d[p];a=l.afterGenerate(l.prop,a,e,t,r)}return a},P=function(e){for(var t={index:0,dynamic:!1,static:!1,exclude:q,dependencies:{props:[],methods:[]}},n=I(e,void 0,0,t),r=t.dependencies,i=r.props,o=r.methods,s="",d=0;d<i.length;d++){var v=i[d];s+="var "+v+' = instance.get("'+v+'");'}for(d=0;d<o.length;d++){var u=o[d];s+="var "+u+' = instance.methods["'+u+'"];'}var f="var instance = this;"+s+"return "+n+";";try{return new Function("m",f)}catch(e){return a("Could not create render function"),c}},D=function(e){var t=L(e),n=z(t);return P(n)};t.prototype.get=function(e){var t=this.observer,n=t.map,r=t.target;return void 0!==r&&(void 0===n[e]?n[e]=[r]:-1===n[e].indexOf(r)&&n[e].push(r)),this.data[e]},t.prototype.set=function(e,t){var n=this.observer;if("object"==typeof e){var r=this.data;for(var i in e)r[i]=e[i],n.notify(i)}else this.data[e]=t,n.notify(e);s(this)},t.prototype.destroy=function(){this.off(),this.root=void 0,this.queued=!0,d(this,"destroyed")},t.prototype.on=function(e,t){var n=this.events,r=n[e];void 0===r?n[e]=[t]:r.push(t)},t.prototype.off=function(e,t){if(void 0===e)this.events={};else if(void 0===t)this.events[e]=[];else{var n=this.events[e],r=n.indexOf(t);n.splice(r,1)}},t.prototype.emit=function(e,t){var n=this.events,r={};void 0!==t&&(r=t),r.type=e;var i,o=n[e],a=n["*"];if(void 0!==o)for(i=0;i<o.length;i++)o[i](r);if(void 0!==a)for(i=0;i<a.length;i++)a[i](r)},t.prototype.mount=function(e){var n=this.root="string"==typeof e?document.querySelector(e):e;v(this,"template",this.options.template,n.outerHTML),this.compiledRender===c&&(this.compiledRender=t.compile(this.template)),this.queued=!1;var r=this.render();if(n.nodeName.toLowerCase()===r.type)g(n,r);else{var i=f(r);n.parentNode.replaceChild(i,n),this.root=i}this.dom=r,d(this,"mounted")},t.prototype.render=function(){return this.compiledRender(l)},t.prototype.build=function(){var e=this.root,t=this.render(),n=this.dom;if(t.type===n.type)t!==n&&b(t,n);else{var r=f(t);e.parentNode.replaceChild(r,e),this.root=r}},t.prototype.init=function(){o("======= Moon ======="),d(this,"init");var e=this.options.root;void 0!==e&&this.mount(e)},t.config={silent:!0},t.version="0.11.0",t.util={noop:c,log:o,error:a,m:l},t.use=function(e,n){e.init(t,n)},t.compile=function(e){return D(e)},t.nextTick=function(e){setTimeout(e,0)},t.directive=function(e,t){n["m-"+e]=t},t.extend=function(e,n){function r(e){this.componentOptions=e,t.apply(this,[n])}return n.name=e,void 0!==n.data&&"function"!=typeof n.data&&a("In components, data must be a function returning an object"),r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.prototype.init=function(){var e=this.componentOptions,t=e.props,n=this.data;for(var r in t)n[r]=t[r];this.events=e.events,this.insert=e.insert,d(this,"init");var i=e.root;void 0!==i&&this.mount(i)},i[e]={CTor:r,options:n},r};var H=/\.|\[/,F=function(e,t,n){var r=n.data,i=r.events;if(void 0===i)(i=r.events={})[e]=[t];else{var o=i[e];void 0===o?i[e]=[t]:o.push(t)}},B=function(e,t,n){var r=n.props.dom;void 0===r&&(n.props.dom=r={}),r[e]=t};return r["m-if"]={beforeGenerate:function(e,t,n,r){for(var i=n.children,o=r.index+1;o<i.length;o++){var a=i[o];if("string"!=typeof a){var s=e.data;void 0!==a.props.attrs["m-else"]&&(s.elseNode=[o,a],i.splice(o,1),!1===r.dynamic&&(r.dynamic=!0,s.ifSetDynamic=!0));break}}t.data.dynamic=1},afterGenerate:function(e,t,n,r,i){var o=e.value,a=e.data,s="m.emptyVNode",d=a.elseNode;return j(o,i.exclude,i.dependencies),void 0!==d&&(s=I(d[1],r,d[0],i),!0===a.ifSetDynamic&&(i.dynamic=!1)),o+" ? "+t+" : "+s}},r["m-for"]={beforeGenerate:function(e,t,n,r){n.deep=!0;var i=e.value.split(" in "),o=i[0],a=i[1],s=r.exclude;e.data.forInfo=[a,o,s],r.exclude=s.concat(o.split(",")),j(a,s,r.dependencies),t.data.dynamic=1},afterGenerate:function(e,t,n,r,i){var o=e.data.forInfo;return i.exclude=o[2],"m.renderLoop("+o[0]+", function("+o[1]+") {return "+t+";})"}},r["m-on"]={beforeGenerate:function(e,t,n,r){var i=e.arg,o=e.value;-1===o.indexOf("(")&&(o+="(event)"),!0===j(o,r.exclude,r.dependencies)&&(t.data.dynamic=1),F(i,"function(event) {"+o+";}",t)}},r["m-bind"]={beforeGenerate:function(e,t,n,r){var i=e.value;j(i,r.exclude,r.dependencies);var o,a,s=i.search(H);-1!==s&&(i='instance.get("'+(o=i.substring(0,s))+'")'+(a=i.substring(s)));var d=i,v=i,c="";c=-1===s?'function(event) {instance.set("'+d+'", event.target.value);}':'function(event) {var boundValue = instance.get("'+o+'");boundValue'+a+' = event.target.value;instance.set("'+o+'", boundValue);}',t.data.dynamic=1,F("input",c,t),B("value",v,t)}},r["m-literal"]={duringPropGenerate:function(e,t,n,r){var i=e.arg.split("."),o=i.shift(),a=e.value;return!0===j(a,r.exclude,r.dependencies)&&(t.data.dynamic=1),"dom"===i[0]?(B(o,a,t),""):"class"===o?'"class": m.renderClass('+a+"), ":'"'+o+'": '+a+", "}},r["m-static"]={beforeGenerate:function(e,t,n,r){!1===r.static&&(e.data.staticSet=!0,r.static=!0)},afterGenerate:function(e,t,n,r,i){return!0===e.data.staticSet&&(i.static=!1),t}},r["m-mask"]={},n["m-show"]=function(e,t,n){e.style.display=t?"":"none"},t});