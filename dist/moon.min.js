/**
 * Moon v1.0.0-alpha
 * Copyright 2016-2018 Kabir Shah
 * Released under the MIT License
 * https://kbrsh.github.io/moon
 */
!function(n,e){"undefined"==typeof module?n.Moon=e():module.exports=e()}(this,function(){"use strict";var m,n={silent:!0},u=function(n,t){return n.reduce(function(n,e){return n+t(e)},"")},d=/"[^"]*"|'[^']*'|\d+[a-zA-Z$_]\w*|\.[a-zA-Z$_]\w*|[a-zA-Z$_]\w*:|([a-zA-Z$_]\w*)/g,c=/(?:(?:&(?:amp|gt|lt|nbsp|quot);)|"|\\|\n)/g,o={"&amp;":"&","&gt;":">","&lt;":"<","&nbsp;":" ","&quot;":'\\"',"\\":"\\\\",'"':'\\"',"\n":"\\n"},p=function(n,e){e[e.length-1].children.push(n)},a=function(n,e,t){for(;n<t;){var r=e[n],u=e[n+1],i=e[n+2];if("<"===r&&"!"===u&&"-"===i&&"-"===e[n+3])n=a(n+4,e,t);else{if("-"===r&&"-"===u&&">"===i){n+=3;break}n+=1}}return n},f=function(n,e,t,r){for(var u="";n<t;n++){var i=e[n];if(">"===i){var c={index:m++,type:u,children:[]};p(c,r),r.push(c),n+=1;break}if("/"===i&&">"===e[n+1]){p({index:m++,type:u,children:[]},r),n+=2;break}u+=i}return n},s=function(n,e,t,r){for(;n<t;n++){var u=e[n];if(">"===u){n+=1;break}u}var i=r.pop();return i.type,n},l=function(n,e,t,r){for(var u="";n<t;n++){var i=e[n];if("<"===i||"{"===i)break;u+=i}return p({index:m++,type:"m-text",content:u.replace(c,function(n){return o[n]})},r),n},v=function(n,e,t,r,u,i){for(var c,o="";n<t;n++){var a=e[n];if("}"===a){n+=1;break}o+=a}for(;null!==(c=d.exec(o));){var f=c[1];void 0!==f&&-1===i.indexOf(f)&&u.push(f)}return p({index:m++,type:"m-expression",content:o},r),n},t=function(n){switch(n.type){case"m-fragment":return u(n.children,t);case"m-expression":return"m["+n.index+'] = m.ct("");';case"m-text":return"m["+n.index+'] = m.ct("'+n.content+'");';default:return u(n.children,t)+"m["+n.index+'] = m.ce("'+n.type+'");'}},i=function(n,e){var t="";switch(n.type){case"m-fragment":return u(n.children,function(n){return i(n,e)});default:var r="m["+n.index+"]";"m-text"!==n.type&&"m-expression"!==n.type&&(t+=u(n.children,function(n){return i(n,r)})),t+="m.ma("+r+", "+e+");"}return t},r=function(n){switch(n.type){case"m-expression":return"m.ut(m["+n.index+"], "+n.content+");";case"m-text":return"";default:return u(n.children,r)}},h=function(n){return e=function(n){for(var e=n.length,t=[],r=["NaN","false","in","m","null","true","typeof","undefined"],u={type:"m-fragment",children:[],dependencies:t},i=[u],c=m=0;c<e;){var o=n[c];c="<"===o?"!"===n[c+1]&&"-"===n[c+2]&&"-"===n[c+3]?a(c+4,n,e):"/"===n[c+1]?s(c+2,n,e,i):f(c+1,n,e,i):"{"===o?v(c+1,n,e,i,t,r):l(c,n,e,i)}return u}(n),new Function("return [function () {var m = this.m;"+t(e)+"}, function (root) {var m = this.m;"+i(e,"root")+"}, function () {var m = this.m;"+e.dependencies.map(function(n){return"var "+n+" = this."+n+";"})+r(e)+"}]")();var e},e=function(n){return document.createElement(n)},x=function(n){return document.createTextNode(n)},y=function(n,e){e.appendChild(n)},g=function(n,e){n.textContent=e},b=function(){var n=[];return n.ce=e,n.ct=x,n.ma=y,n.ut=g,n};function w(n,e){"string"==typeof n&&(n=document.querySelector(n)),"string"==typeof e&&(e=h(e));var t={name:"@",data:{},create:e[0],mount:e[1],update:e[2],m:b()};return t.create(),t.mount(n),t.update(),t}return w.extend=function(n,e,t){"string"==typeof e&&(e=h(e))},w.compile=h,w.config=n,w});