/**
 * Moon v1.0.0-alpha
 * Copyright 2016-2018 Kabir Shah
 * Released under the MIT License
 * https://kbrsh.github.io/moon
 */
!function(n,e){"undefined"==typeof module?n.Moon=e():module.exports=e()}(this,function(){"use strict";var d,n={silent:!0},u=function(n,t){return n.reduce(function(n,e){return n+t(e)},"")},m=/"[^"]*"|'[^']*'|\d+[a-zA-Z$_]\w*|\.[a-zA-Z$_]\w*|[a-zA-Z$_]\w*:|([a-zA-Z$_]\w*)/g,o=/(?:(?:&(?:amp|gt|lt|nbsp|quot);)|"|\\|\n)/g,c={"&amp;":"&","&gt;":">","&lt;":"<","&nbsp;":" ","&quot;":'\\"',"\\":"\\\\",'"':'\\"',"\n":"\\n"},p=function(n,e){e[e.length-1].children.push(n)},a=function(n,e,t){for(;n<t;){var r=e[n],u=e[n+1],i=e[n+2];if("<"===r&&"!"===u&&"-"===i&&"-"===e[n+3])n=a(n+4,e,t);else{if("-"===r&&"-"===u&&">"===i){n+=3;break}n+=1}}return n},f=function(n,e,t,r){for(var u="";n<t;n++){var i=e[n];if(">"===i){var o={index:d++,type:u,children:[]};p(o,r),r.push(o),n+=1;break}if("/"===i&&">"===e[n+1]){p({index:d++,type:u,children:[]},r),n+=2;break}u+=i}return n},s=function(n,e,t,r){for(;n<t;n++){var u=e[n];if(">"===u){n+=1;break}u}var i=r.pop();return i.type,n},l=function(n,e,t,r){for(var u="";n<t;n++){var i=e[n];if("<"===i||"{"===i)break;u+=i}return p({index:d++,type:"m-text",content:u.replace(o,function(n){return c[n]})},r),n},v=function(n,e,t,r,u,i){for(var o,c="";n<t;n++){var a=e[n];if("}"===a){n+=1;break}c+=a}for(;null!==(o=m.exec(c));){var f=o[1];void 0!==f&&-1===i.indexOf(f)&&u.push(f)}return p({index:d++,type:"m-expression",content:c},r),n},t=function(n){switch(n.type){case"m-fragment":return u(n.children,t);case"m-expression":return"m["+n.index+'] = m.ct("");';case"m-text":return"m["+n.index+'] = m.ct("'+n.content+'");';default:return u(n.children,t)+"m["+n.index+'] = m.ce("'+n.type+'");'}},i=function(n,e){var t="";switch(n.type){case"m-fragment":return u(n.children,function(n){return i(n,e)});default:var r="m["+n.index+"]";"m-text"!==n.type&&"m-expression"!==n.type&&(t+=u(n.children,function(n){return i(n,r)})),t+="m.ma("+r+", "+e+");"}return t},r=function(n){switch(n.type){case"m-expression":return"m.ut(m["+n.index+"], "+n.content+");";case"m-text":return"";default:return u(n.children,r)}},h=function(n){return e=function(n){for(var e=n.length,t=[],r=["NaN","false","in","m","null","true","typeof","undefined"],u={type:"m-fragment",children:[],dependencies:t},i=[u],o=d=0;o<e;){var c=n[o];o="<"===c?"!"===n[o+1]&&"-"===n[o+2]&&"-"===n[o+3]?a(o+4,n,e):"/"===n[o+1]?s(o+2,n,e,i):f(o+1,n,e,i):"{"===c?v(o+1,n,e,i,t,r):l(o,n,e,i)}return u}(n),new Function("return [function () {var m = this.m;"+t(e)+"}, function (root) {var m = this.m;"+i(e,"root")+"}, function () {var m = this.m;"+e.dependencies.map(function(n){return"var "+n+" = this.data."+n+";"})+r(e)+"}]")();var e},e=function(n){return document.createElement(n)},x=function(n){return document.createTextNode(n)},y=function(n,e){e.appendChild(n)},g=function(n,e){n.textContent=e},b=function(){var n=[];return n.ce=e,n.ct=x,n.ma=y,n.ut=g,n};function w(n,e,t){"string"==typeof n&&(n=document.querySelector(n)),"string"==typeof e&&(e=h(e)),void 0===t&&(t={});var r={name:"m-root",data:t,create:e[0],mount:e[1],update:e[2],m:b()};return r.create(),r.mount(n),r.update(),r}return w.extend=function(n,e,t){"string"==typeof e&&(e=h(e)),void 0===t&&(t=function(){return{}})},w.compile=h,w.config=n,w});