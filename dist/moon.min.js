/**
 * Moon v1.0.0-alpha
 * Copyright 2016-2018 Kabir Shah
 * Released under the MIT License
 * https://kbrsh.github.io/moon
 */
!function(e,n){"undefined"==typeof module?e.Moon=n():module.exports=n()}(this,function(){"use strict";var d,e={silent:!0},m=/"[^"]*"|'[^']*'|\d+[a-zA-Z$_]\w*|\.[a-zA-Z$_]\w*|[a-zA-Z$_]\w*:|([a-zA-Z$_]\w*)/g,u=/(?:(?:&(?:amp|gt|lt|nbsp|quot);)|"|\\|\n)/g,c={"&amp;":"&","&gt;":">","&lt;":"<","&nbsp;":" ","&quot;":'\\"',"\\":"\\\\",'"':'\\"',"\n":"\\n"},p=function(e,n){n[n.length-1].children.push(e)},a=function(e,n,t){for(;e<t;){var r=n[e],i=n[e+1],o=n[e+2];if("<"===r&&"!"===i&&"-"===o&&"-"===n[e+3])e=a(e+4,n,t);else{if("-"===r&&"-"===i&&">"===o){e+=3;break}e+=1}}return e},f=function(e,n,t,r){for(var i="";e<t;e++){var o=n[e];if(">"===o){var u={index:d++,type:i,children:[]};p(u,r),r.push(u),e+=1;break}if("/"===o&&">"===n[e+1]){p({index:d++,type:i,children:[]},r),e+=2;break}i+=o}return e},s=function(e,n,t,r){for(;e<t;e++){var i=n[e];if(">"===i){e+=1;break}i}var o=r.pop();return o.type,e},l=function(e,n,t,r){for(var i="";e<t;e++){var o=n[e];if("<"===o||"{"===o)break;i+=o}return p({index:d++,type:"m-text",content:i.replace(u,function(e){return c[e]})},r),e},h=function(e,n,t,r,i,o){for(var u,c="";e<t;e++){var a=n[e];if("}"===a){e+=1;break}c+=a}for(;null!==(u=m.exec(c));){var f=u[1];void 0!==f&&-1===o.indexOf(f)&&i.push(f)}return p({index:d++,type:"m-expression",content:c},r),e},v=function(e,t){return e.reduce(function(e,n){return e+t(n)},"")},t=function(e){switch(e.type){case"m-fragment":return v(e.children,t);case"m-expression":return"m["+e.index+'] = document.createTextNode("");';case"m-text":return"m["+e.index+'] = document.createTextNode("'+e.content+'");';default:return v(e.children,t)+"m["+e.index+'] = document.createElement("'+e.type+'");'}},x=function(e,r){var i="";switch(e.type){case"m-fragment":for(var o=e.children,n=function(e){var n=o[e],t="m["+n.index+"]";"m-text"!==n.type&&(i+=v(n.children,function(e){return x(e,t)})),i+=r+".parentNode.insertBefore("+t+", "+r+");"},t=0;t<o.length;t++)n(t);break;default:var u="m["+e.index+"]";"m-text"!==e.type&&"m-expression"!==e.type&&(i+=v(e.children,function(e){return x(e,u)})),i+=r+".appendChild("+u+");"}return i},r=function(e){switch(e.type){case"m-expression":return"m["+e.index+"].textContent = "+e.content+";";case"m-text":return"";default:return v(e.children,r)}},i=function(e){return n=function(e){for(var n=e.length,t=[],r=["NaN","false","in","m","null","true","typeof","undefined"],i={type:"m-fragment",children:[],dependencies:t},o=[i],u=d=0;u<n;){var c=e[u];u="<"===c?"!"===e[u+1]&&"-"===e[u+2]&&"-"===e[u+3]?a(u+4,e,n):"/"===e[u+1]?s(u+2,e,n,o):f(u+1,e,n,o):"{"===c?h(u+1,e,n,o,t,r):l(u,e,n,o)}return i}(e),new Function("return [function () {var m = this.m;"+t(n)+"}, function (root) {var m = this.m;"+x(n,"root")+"}, function () {var m = this.m;"+n.dependencies.map(function(e){return"var "+e+" = this."+e+";"})+r(n)+"}]")();var n};function n(e,n){"string"==typeof e&&(e=document.querySelector(e)),"string"==typeof n&&(n=i(n));var t={name:"@",data:{},create:n[0],mount:n[1],update:n[2],m:[]};return t.create(),t.mount(e),e.parentNode.removeChild(e),t}return n.extend=function(e,n,t){"string"==typeof n&&(n=i(n))},n.compile=i,n.config=e,n});