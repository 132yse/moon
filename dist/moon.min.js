/**
 * Moon v1.0.0-alpha
 * Copyright 2016-2018 Kabir Shah
 * Released under the MIT License
 * https://kbrsh.github.io/moon
 */
!function(e,n){"undefined"==typeof module?e.Moon=n():module.exports=n()}(this,function(){"use strict";var a=function(e,n,t){for(;e<t;){var r=n[e],u=n[e+1],i=n[e+2];if("<"===r&&"!"===u&&"-"===i&&"-"===n[e+3])e=a(e+4,n,t);else{if("-"===r&&"-"===u&&">"===i){e+=3;break}e+=1}}return e},e={silent:!0},u=function(e,t){return e.reduce(function(e,n){return e+t(n)},"")},d=/"[^"]*"|'[^']*'|\d+[a-zA-Z$_]\w*|\.[a-zA-Z$_]\w*|[a-zA-Z$_]\w*:|([a-zA-Z$_]\w*)/g,o=/(?:(?:&(?:amp|gt|lt|nbsp|quot);)|"|\\|\n)/g,c={"&amp;":"&","&gt;":">","&lt;":"<","&nbsp;":" ","&quot;":'\\"',"\\":"\\\\",'"':'\\"',"\n":"\\n"},m=function(e,n){n[n.length-1].children.push(e)},f=function(e,n,t,r){for(var u="";e<t;e++){var i=n[e];if(">"===i){var o={index:r.parseIndex++,type:u,children:[]};m(o,r),r.push(o),e+=1;break}if("/"===i&&">"===n[e+1]){m({index:r.parseIndex++,type:u,children:[]},r),e+=2;break}u+=i}return e},p=function(e,n,t,r){for(;e<t;e++){var u=n[e];if(">"===u){e+=1;break}u}var i=r.pop();return i.type,e},s=function(e,n,t,r){for(var u="";e<t;e++){var i=n[e];if("<"===i||"{"===i)break;u+=i}return m({index:r.parseIndex++,type:"m-text",content:u.replace(o,function(e){return c[e]})},r),e},l=function(e,n,t,r,u,i){for(var o,c="";e<t;e++){var a=n[e];if("}"===a){e+=1;break}c+=a}for(;null!==(o=d.exec(c));){var f=o[1];void 0!==f&&-1===i.indexOf(f)&&u.push(f)}return m({index:r.parseIndex++,type:"m-expression",content:c},r),e},t=function(e){switch(e.type){case"m-fragment":return u(e.children,t);case"m-expression":return"m["+e.index+'] = m.ct("");';case"m-text":return"m["+e.index+'] = m.ct("'+e.content+'");';default:return u(e.children,t)+"m["+e.index+'] = m.ce("'+e.type+'");'}},i=function(e,n){var t="";switch(e.type){case"m-fragment":return u(e.children,function(e){return i(e,n)});default:var r="m["+e.index+"]";"m-text"!==e.type&&"m-expression"!==e.type&&(t+=u(e.children,function(e){return i(e,r)})),t+="m.ma("+r+", "+n+");"}return t},r=function(e){switch(e.type){case"m-expression":return"m.ut(m["+e.index+"], "+e.content+");";case"m-text":return"";default:return u(e.children,r)}},x=function(e){return n=function(e){for(var n=e.length,t=[],r=["NaN","false","in","m","null","true","typeof","undefined"],u={type:"m-fragment",children:[],dependencies:t},i=[u],o=i.parseIndex=0;o<n;){var c=e[o];o="<"===c?"!"===e[o+1]&&"-"===e[o+2]&&"-"===e[o+3]?a(o+4,e,n):"/"===e[o+1]?p(o+2,e,n,i):f(o+1,e,n,i):"{"===c?l(o+1,e,n,i,t,r):s(o,e,n,i)}return u}(e),new Function("return [function () {var m = this.m;"+t(n)+"}, function (root) {var m = this.m;"+i(n,"root")+"}, function () {var m = this.m;"+n.dependencies.map(function(e){return"var "+e+" = this.data."+e+";"})+r(n)+"}]")();var n},n=function(e){return document.createElement(e)},v=function(e){return document.createTextNode(e)},h=function(e,n){n.appendChild(e)},y=function(e,n){e.textContent=n},g=function(){var e=[];return e.ce=n,e.ct=v,e.ma=h,e.ut=y,e};function b(e,n,t){"string"==typeof e&&(e=document.querySelector(e)),"string"==typeof n&&(n=x(n)),void 0===t&&(t={});var r={name:"m-root",data:t,create:n[0],mount:n[1],update:n[2],m:g()};return r.create(),r.mount(e),r.update(),r}return b.extend=function(e,n,t){"string"==typeof n&&(n=x(n)),void 0===t&&(t=function(){return{}})},b.compile=x,b.config=e,b});