/**
 * Moon v1.0.0-alpha
 * Copyright 2016-2018 Kabir Shah
 * Released under the MIT License
 * https://kbrsh.github.io/moon
 */
!function(n,e){"undefined"==typeof module?n.Moon=e():module.exports=e()}(this,function(){"use strict";var a=function(n,e,t){for(;n<t;){var r=e[n],i=e[n+1],u=e[n+2];if("<"===r&&"!"===i&&"-"===u&&"-"===e[n+3])n=a(n+4,e,t);else{if("-"===r&&"-"===i&&">"===u){n+=3;break}n+=1}}return n},n={silent:!0},d=function(n,e){e[e.length-1].children.push(n)},f=function(n,e,t,r){for(var i="";n<t;n++){var u=e[n];if(">"===u){var o={index:r.parseIndex++,type:i,children:[]};d(o,r),r.push(o),n+=1;break}if("/"===u&&">"===e[n+1]){d({index:r.parseIndex++,type:i,children:[]},r),n+=2;break}i+=u}return n},s=function(n,e,t,r){for(;n<t;n++){var i=e[n];if(">"===i){n+=1;break}i}var u=r.pop();return u.type,n},o=/(?:(?:&(?:amp|gt|lt|nbsp|quot);)|"|\\|\n)/g,c={"&amp;":"&","&gt;":">","&lt;":"<","&nbsp;":" ","&quot;":'\\"',"\\":"\\\\",'"':'\\"',"\n":"\\n"},m=function(n,e,t,r){for(var i="";n<t;n++){var u=e[n];if("<"===u||"{"===u)break;i+=u}return d({index:r.parseIndex++,type:"m-text",content:i.replace(o,function(n){return c[n]})},r),n},p=/"[^"]*"|'[^']*'|\d+[a-zA-Z$_]\w*|\.[a-zA-Z$_]\w*|[a-zA-Z$_]\w*:|([a-zA-Z$_]\w*)/g,l=function(n,e,t,r,i,u){for(var o,c="";n<t;n++){var a=e[n];if("}"===a){n+=1;break}c+=a}for(;null!==(o=p.exec(c));){var f=o[1];void 0!==f&&-1===u.indexOf(f)&&i.push(f)}return d({index:r.parseIndex++,type:"m-expression",content:c},r),n},i=function(n,t){return n.reduce(function(n,e){return n+t(e)},"")},r=function(n){switch(n.type){case"m-fragment":return i(n.children,r);case"m-expression":return"m["+n.index+"] = m.ct("+n.content+");";case"m-text":return"m["+n.index+'] = m.ct("'+n.content+'");';default:return i(n.children,r)+"m["+n.index+'] = m.ce("'+n.type+'");'}},u=function(n,e){var t="";switch(n.type){case"m-fragment":return i(n.children,function(n){return u(n,e)});default:var r="m["+n.index+"]";"m-text"!==n.type&&"m-expression"!==n.type&&(t+=i(n.children,function(n){return u(n,r)})),t+="m.ma("+r+", "+e+");"}return t},h=function(n){switch(n.type){case"m-expression":return"m.ut(m["+n.index+"], "+n.content+");";case"m-text":return"";default:return i(n.children,h)}},x=function(n){return e=function(n){for(var e=n.length,t=[],r=["NaN","false","in","m","null","true","typeof","undefined"],i={type:"m-fragment",children:[],dependencies:t},u=[i],o=u.parseIndex=0;o<e;){var c=n[o];o="<"===c?"!"===n[o+1]&&"-"===n[o+2]&&"-"===n[o+3]?a(o+4,n,e):"/"===n[o+1]?s(o+2,n,e,u):f(o+1,n,e,u):"{"===c?l(o+1,n,e,u,t,r):m(o,n,e,u)}return i}(n),t="var m = this.m; "+i(e.dependencies,function(n){return"var "+n+" = this.data."+n+";"}),new Function("return [function () {"+t+r(e)+"}, function (root) {var m = this.m;"+u(e,"root")+"}, function () {var m = this.m;"+t+h(e)+"}]")();var e,t},v=function(n){return document.createElement(n)},y=function(n){return document.createTextNode(n)},g=function(n,e){e.appendChild(n)},b=function(n,e){n.textContent=e},w=function(e,t,r){return function(){var n;this.name=e,this.data=r(),this.create=t[0],this.mount=t[1],this.update=t[2],this.m=((n=[]).ce=v,n.ct=y,n.ma=g,n.ut=b,n)}};function e(n,e,t){if("string"==typeof n&&(n=document.querySelector(n)),"string"==typeof e&&(e=x(e)),void 0===t)t=function(){return{}};else if("object"==typeof t){var r=t;t=function(){return r}}var i=new(w("m-root",e,t));return i.create(),i.mount(n),i}return e.extend=function(n,e,t){"string"==typeof e&&(e=x(e)),void 0===t&&(t=function(){return{}})},e.compile=x,e.config=n,e});