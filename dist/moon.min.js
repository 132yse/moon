/**
 * Moon v0.11.0
 * Copyright 2016-2017 Kabir Shah
 * Released under the MIT License
 * http://moonjs.ga
 */
!function(t,e){"undefined"==typeof module?t.Moon=e():module.exports=e()}(this,function(){"use strict";function t(){this.target=void 0,this.cache={},this.map={}}function e(e){void 0===e&&(e={}),this.options=e,v(this,"name",e.name,"Root"),this.root=void 0;var n=e.data;this.data=void 0===n?{}:"function"==typeof n?n():n;var r=e.methods;this.methods={},void 0!==r&&A(this,r),v(this,"compiledRender",e.render,d),v(this,"hooks",e.hooks,{}),this.events={},this.dom={},this.observer=new t,this.queued=!0;var o=e.computed;void 0!==o&&C(this,o),this.init()}var n={},r={},o={},i=function(t){!1===e.config.silent&&console.log(t)},a=function(t){!1===e.config.silent&&console.error("[Moon] ERROR: "+t)},s=function(t,e){var n=t.hooks[e];void 0!==n&&n.call(t)},v=function(t,e,n,r){t[e]=void 0===n?r:n},d=function(){},u=function(t,e){var n=function(n){var r=function(t){for(var e=r.handlers,n=0;n<e.length;n++)e[n](t)};r.handlers=e[n],e[n]=r,t.addEventListener(n,r)};for(var r in e)n(r)},f=function(t){var e,n=t.type,r=t.data;if("#text"===n)e=document.createTextNode(t.value);else{var o=t.children;e=1===r.SVG?document.createElementNS("http://www.w3.org/2000/svg",n):document.createElement(n);for(var i=0;i<o.length;i++)p(o[i],e);var a=r.events;void 0!==a&&u(e,a),x(e,void 0,t,t.props)}return r.node=e,e},c=function(t,e,n){var r=n.options.props,o=e.props.attrs,i={};if(void 0!==r&&void 0!==o)for(var a=0;a<r.length;a++){var s=r[a];i[s]=o[s]}var v={root:t,props:i,insert:e.children},d=e.data.events;v.events=void 0===d?{}:d;var u=new n.CTor(v),f=e.data;f.component=u,f.node=u.root},l=function(t,e){e.appendChild(t)},p=function(t,e){var n=t.data.component;if(void 0===n)l(f(t),e);else{var r=document.createElement(t.type);l(r,e),c(r,t,n)}},h=function(t,e){e.removeChild(t)},m=function(t,e){var n=t.data,r=n.component;void 0!==r&&r.destroy(),h(n.node,e)},g=function(t,e,n){n.replaceChild(t,e)},y=function(t,e,n){var r=e.data,o=r.component;void 0!==o&&o.destroy();var i=t.data.component;void 0===i?g(f(t),r.node,n):c(r.node,t,i)},b=function(t,e,n,r){if("#text"===t)return{type:t,value:e,data:{}};var i=o[t];return void 0!==i&&(n.component=i),{type:t,props:e,data:n,children:r}};b.flatten=function(t){for(var e=0;e<t.length;){var n=t[e];if(!0===Array.isArray(n)){var r=n.length;n.unshift(e,1),t.splice.apply(t,n),n.slice(2,0),e+=r}else e++}return t},b.renderClass=function(t){if("string"==typeof t)return t;var e="",n="";if(!0===Array.isArray(t))for(var r=0;r<t.length;r++)e+=n+b.renderClass(t[r]),n=" ";else if("object"==typeof t)for(var o in t)!0===t[o]&&(e+=n+o,n=" ");return e},b.renderLoop=function(t,e){var n;if(Array.isArray(t)){var r=t.length;n=new Array(r);for(var o=0;o<r;o++)n[o]=e(t[o],o)}else if("object"==typeof t){n=[];for(var i in t)n.push(e(t[i],i))}else if("number"==typeof t){n=new Array(t);for(var a=0;a<t;a++)n[a]=e(a+1,a)}return n};var x=function(t,e,r,o){var i=o.attrs;if(void 0===i){if(void 0!==e)for(var a in e)t.removeAttribute(a)}else if(void 0===e)for(var s in i){var v=i[s];t.setAttribute(s,!0===v?"":v)}else{for(var d in i){var u=i[d],f=e[d];!1===u||void 0!==f&&u===f||t.setAttribute(d,!0===u?"":u)}for(var c in e){var l=i[c];void 0!==l&&!1!==l||t.removeAttribute(c)}}var p=o.directives;if(void 0!==p)for(var h in p){var m=n[h];void 0!==m&&m(t,p[h],r)}var g=o.dom;if(void 0!==g)for(var y in g)t[y]=g[y]},N=function(t,e){for(var n in t)e[n].handlers=t[n]},w=function(t,e){var n=e.data;n.node=t;for(var r=e.props,o=t.attributes,i={},a=0;a<o.length;a++){var s=o[a];i[s.name]=s.value}x(t,i,e,r);var v=n.events;void 0!==v&&u(t,v);var d=r.dom;if(void 0===d||void 0===d.innerHTML&&void 0===d.textContent)for(var l=e.children,m=l.length,y=0,b=y===m?void 0:l[y],N=t.firstChild;void 0!==b||null!==N;){if(null===N)p(b,t);else{var O=N.nextSibling;if(void 0===b)h(N,t);else{var A=b.data.component;if(void 0!==A)c(N,b,A);else{var C=b.type;N.nodeName.toLowerCase()!==C?g(f(b),N,t):"#text"===C?(N.textContent=b.value,b.data.node=N):w(N,b)}}N=O}b=++y<m?l[y]:void 0}},O=function(t,e){var n=e.data,r=n.node,o=t.props;x(r,e.props.attrs,t,o),e.props=o;var i=t.data.events;void 0!==i&&N(i,n.events),function(t,e,n){for(var r=t.length,o=e.length,i=r>o?r:o,a=0;a<i;a++)if(a>=r)m(e.pop(),n);else if(a>=o)p(e[a]=t[a],n);else{var v=t[a],d=e[a],u=v.type;if(u!==d.type)y(v,d,n),e[a]=v;else if(v!==d){var f=d.data,c=f.component;if(void 0!==c){var l=!1,h=c.options.props;if(void 0!==h){for(var g=v.props.attrs,b=c.observer,x=c.data,w=0;w<h.length;w++){var A=h[w];x[A]=g[A],b.notify(A)}l=!0}var C=v.data.events;void 0!==C&&N(C,f.events);var T=v.children;0!==T.length&&(c.insert=T,l=!0),!0===l&&(c.build(),s(c,"updated"))}else if("#text"===u){var k=v.value;f.node.textContent=k,d.value=k}else O(v,d)}}}(t.children,e.children,r)},A=function(t,e){var n=t.methods,r=function(r){n[r]=function(){return e[r].apply(t,arguments)}};for(var o in e)r(o)},C=function(t,e){var n=t.data,r=t.observer,o=function(o){var i=e[o],a=i.get,s=i.set;Object.defineProperty(n,o,{get:function(){var e;return void 0===r.cache[o]?(r.target=o,e=a.call(t),r.target=void 0,r.cache[o]=e):e=r.cache[o],e},set:void 0===s?d:function(e){s.call(t,e)}})};for(var i in e)o(i)};t.prototype.notify=function(t){var e=this.map[t];if(void 0!==e)for(var n=0;n<e.length;n++)this.notify(e[n]);var r=this.cache;void 0!==r[t]&&(r[t]=void 0)};var T=/\{\{\s*/,k=/\s*\}\}/,R=/[\s\n]/,q=/[\s\n]/g,j=/<\/?(?:[A-Za-z]+\w*)|<!--/,E=/"[^"]*"|'[^']*'|\d+[a-zA-Z$_]\w*|\.[a-zA-Z$_]\w*|[a-zA-Z$_]\w*:|([a-zA-Z$_]\w*)(?:\s*\()?/g,L=/(?:(?:&(?:lt|gt|amp|nbsp|quot);)|"|\\|\n)/g,S={"&lt;":"<","&gt;":">","&amp;":"&","&nbsp;":" ","&quot;":'\\"',"\\":"\\\\",'"':'\\"',"\n":"\\n"},z=["instance","staticNodes","true","false","undefined","null","NaN","typeof","in"],M=["area","base","br","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],V=["animate","circle","clippath","cursor","defs","desc","ellipse","filter","font-face","foreignObject","g","glyph","image","line","marker","mask","missing-glyph","path","pattern","polygon","polyline","rect","svg","switch","symbol","text","textpath","tspan","use","view"],Z=function(t,e){for(var n,r=e.dependencies,o=r.props,i=r.methods,a=e.exclude,s=e.locals,v=!1;null!==(n=E.exec(t));){var d=n[0],u=n[1];void 0!==u&&-1===a.indexOf(u)&&("("===d[d.length-1]?-1===i.indexOf(u)&&i.push(u):(-1===s.indexOf(u)&&-1===o.indexOf(u)&&o.push(u),v=!0))}return v},$=function(t,e){var n=t.length,r=0,o=!1,i="";if(0===n)i='""';else for(;r<n;){var a=t.substring(r),s=a.match(T);if(null===s){i+='"'+a+'"';break}var v=s.index;0!==v&&(i+='"'+a.substring(0,v)+'"',r+=v),o=!0,0!==r&&(i+=" + "),r+=s[0].length;var d=t.substring(r),u=d.match(k),f=u.index,c=d.substring(0,f);Z(c,e),i+="("+c+")",(r+=c.length+u[0].length)!==n&&(i+=" + ")}return{output:i,dynamic:o}},_=function(t,e){var n=e.length;return e[n]=t,"staticNodes["+n+"]"},I=function(t,e,n){var o=t.type;if("#text"===o){var i=$(t.value,n);return{output:'m("#text", '+i.output+")",dynamic:i.dynamic}}if("m-insert"===o)return e.deep=!0,{output:"instance.insert",dynamic:!0};var a='m("'+o+'", {',s=!1,v="",d=t.data={};-1!==V.indexOf(o)&&(d.SVG=1);var u,f,c,l,p,h=t.props,m=h.attrs,g=[],y=[],b=[];for(f in m)c=m[f],void 0!==(u=r[c.name])&&void 0!==(p=u.before)&&!0===p(c,t,e,n)&&(s=!0);for(f in m)if(c=m[f],void 0!==(u=r[c.name])){var x=u.after;void 0!==x&&b.push({attr:c,after:x});var N=u.during;if(void 0!==N){var w=N(c,t,e,n);void 0!==w&&(!0===w.dynamic&&(s=!0),g.push(w.output))}}else"m"===f[0]&&"-"===f[1]?y.push(c):g.push(c);var O=g.length,A=!1;if(0!==O){for(a+="attrs: {",l=0;l<O;l++){if("string"==typeof(c=g[l]))a+=v+c;else{var C=$(c.value,n);!0===C.dynamic&&(s=!0),a+=v+'"'+c.name+'": '+C.output}v=", "}v="",a+="}",A=!0}var T=y.length;if(0!==T){for(!0===A?a+=", directives: {":(a+="directives: {",A=!0),l=0;l<T;l++){var k=(c=y[l]).value;0===k.length?k='""':!0===Z(k,n)&&(s=!0),a+=v+'"'+c.name+'": '+k,v=", "}v="",a+="}"}var R=h.dom;if(void 0!==R){a+=!0===A?", dom: {":"dom: {";for(var q in R){var j=R[q];!0===Z(j,n)&&(s=!0),a+=v+'"'+q+'": '+j,v=", "}v="",a+="}"}a+="}, {";var E=d.events,L="";if(void 0!==E){a+="events: {";for(var S in E){a+=v+'"'+S+'": [';var z=E[S];for(l=0;l<z.length;l++)a+=L+z[l],L=", ";v=", ",L="",a+="]"}a+="}",delete d.events}for(var M in d)a+=""+v+M+": "+d[M],v=", ";a+="}, ";var G=t.children,H=[],F="";for(v="",l=0;l<G.length;l++){var P=I(G[l],t,n);!0===P.dynamic&&(s=!0),H.push(P)}var B=n.staticNodes;for(l=0;l<H.length;l++){var D=H[l];!0===s&&!1===D.dynamic?F+=v+_(D.output,B):F+=v+D.output,v=", "}for(!0===t.deep?a+="m.flatten(["+F+"]))":a+="["+F+"])",l=0;l<b.length;l++){var J=b[l];a=J.after(J.attr,a,t,e,n)}return{output:a,dynamic:s}},G=function(t){return function(t){var e={staticNodes:[],dependencies:{props:[],methods:[]},exclude:z,locals:[]},n=I(t,void 0,e),r=e.dependencies,o=r.props,i=r.methods,s="",v=e.staticNodes,u="",f=0,c="";for(!0===n.dynamic?n=n.output:(v[0]=n.output,n="staticNodes[0]");f<o.length;f++){var l=o[f];s+="var "+l+' = instance.get("'+l+'");'}for(f=0;f<i.length;f++){var p=i[f];s+="var "+p+' = instance.methods["'+p+'"];'}for(f=0;f<v.length;f++)u+=c+v[f],c=", ";try{return new Function("m","var instance = this;var staticNodes = instance.compiledRender.staticNodes;"+s+"if(staticNodes === undefined) {staticNodes = instance.compiledRender.staticNodes = ["+u+"];}return "+n+";")}catch(t){return a("Could not create render function"),d}}(function(t){for(var e={type:"ROOT",props:{},children:[]},n=[e],r=0,o=0;o<t.length;o++){var i=t[o];if("Text"===i.type)n[r].children.push({type:"#text",value:i.value});else if("Tag"===i.type)if(!0===i.closeStart)n.pop(),r--;else{var a=i.value,s=n[r].children,v=s.length,d={type:a,index:v,props:{attrs:i.attributes},children:[]};s[v]=d,!1===i.closeEnd&&-1===M.indexOf(a)&&(n.push(d),r++)}}return e.children[0]}(function(t){for(var e=t.length,n=[],r=0;r<e;){var o=t[r];if("<"===o)if(r++,"!--"===t.substring(r,r+3)){r+=3;var i=t.indexOf("--\x3e",r);r=-1===i?e:i+3}else{var a={type:"Tag",value:""},s="",v={},d=!1,u=!1;for("/"===(o=t[r])&&(o=t[++r],d=!0);r<e&&">"!==o&&"/"!==o&&!1===R.test(o);)s+=o,o=t[++r];for(;r<e&&">"!==o&&("/"!==o||">"!==t[r+1]);)if(!0===R.test(o))o=t[++r];else{for(var f="",c="";r<e&&"="!==o&&!1===R.test(o)&&">"!==o&&("/"!==o||">"!==t[r+1]);)f+=o,o=t[++r];if("="===o){var l=" ";for('"'!==(o=t[++r])&&"'"!==o&&" "!==o&&"\n"!==o||(l=o,o=t[++r]);r<e&&">"!==o&&("/"!==o||">"!==t[r+1]);){if(o===l){o=t[++r];break}c+=o,o=t[++r]}}var p={name:f,value:c,argument:void 0,data:{}},h=f.split(":");2===h.length&&(p.name=h[0],p.argument=h[1]),v[f]=p}"/"===o?(r+=2,u=!0):r++,a.value=s,a.attributes=v,a.closeStart=d,a.closeEnd=u,n.push(a)}else{var m=t.substring(r),g=m.search(j),y=void 0;-1===g?(y=m,r=e):(y=m.substring(0,g),r+=g),0!==y.replace(q,"").length&&n.push({type:"Text",value:y.replace(L,function(t){return S[t]})})}}return n}(t)))};e.prototype.get=function(t){var e=this.observer,n=e.map,r=e.target;return void 0!==r&&(void 0===n[t]?n[t]=[r]:-1===n[t].indexOf(r)&&n[t].push(r)),this.data[t]},e.prototype.set=function(t,e){var n=this.observer;if("object"==typeof t){var r=this.data;for(var o in t)r[o]=t[o],n.notify(o)}else this.data[t]=e,n.notify(t);!function(t){!1===t.queued&&(t.queued=!0,setTimeout(function(){t.build(),t.queued=!1,s(t,"updated")},0))}(this)},e.prototype.destroy=function(){this.off(),this.root=void 0,this.queued=!0,s(this,"destroyed")},e.prototype.on=function(t,e){var n=this.events,r=n[t];void 0===r?n[t]=[e]:r.push(e)},e.prototype.off=function(t,e){if(void 0===t)this.events={};else if(void 0===e)this.events[t]=[];else{var n=this.events[t],r=n.indexOf(e);n.splice(r,1)}},e.prototype.emit=function(t,e){var n,r=this.events,o=r[t],i=r["*"];if(void 0!==o)for(n=0;n<o.length;n++)o[n](e);if(void 0!==i)for(n=0;n<i.length;n++)i[n](t,e)},e.prototype.mount=function(t){var n=this.root="string"==typeof t?document.querySelector(t):t;v(this,"template",this.options.template,n.outerHTML),this.compiledRender===d&&(this.compiledRender=e.compile(this.template)),this.queued=!1;var r=this.render();if(n.nodeName.toLowerCase()===r.type)w(n,r);else{var o=f(r);g(o,n,n.parentNode),this.root=o}this.dom=r,s(this,"mounted")},e.prototype.render=function(){return this.compiledRender(b)},e.prototype.build=function(){var t=this.render(),e=this.dom;t!==e&&O(t,e)},e.prototype.init=function(){i("======= Moon ======="),s(this,"init");var t=this.options.root;void 0!==t&&this.mount(t)},e.config={silent:!0},e.version="0.11.0",e.util={noop:d,log:i,error:a,m:b},e.use=function(t,n){t.init(e,n)},e.compile=function(t){return G(t)},e.nextTick=function(t){setTimeout(t,0)},e.directive=function(t,e){n["m-"+t]=e},e.extend=function(t,n){function r(t){this.componentOptions=t,e.apply(this,[n])}return n.name=t,void 0!==n.data&&"function"!=typeof n.data&&a("In components, data must be a function returning an object"),r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.init=function(){var t=this.componentOptions,e=t.props,n=this.data;for(var r in e)n[r]=e[r];this.events=t.events,this.insert=t.insert,s(this,"init");var o=t.root;void 0!==o&&this.mount(o)},o[t]={CTor:r,options:n},r};var H=/\.|\[/,F=function(t,e,n){var r=n.data,o=r.events;if(void 0===o)(o=r.events={})[t]=[e];else{var i=o[t];void 0===i?o[t]=[e]:i.push(e)}},P=function(t,e,n){var r=n.props.dom;void 0===r&&(n.props.dom=r={}),r[t]=e};return r["m-if"]={before:function(t,e,n,r){var o=n.children,i=e.index+1,a=o[i],s=Z(t.value,r),v=t.data;if(void 0!==a){var d=a.props.attrs;void 0!==d["m-else"]&&(delete d["m-else"],v.elseNode=I(a,n,r),o.splice(i,1))}if(!0===s){var u=e.props.attrs,f=u["m-if"];delete u["m-if"],v.ifNode=I(e,n,r),e.children=[],u["m-if"]=f}return s},after:function(t,e,n,r,o){var i,a=t.data,s=a.ifNode,v=a.elseNode,d=e,u=o.staticNodes;return void 0!==s&&(d=!0===s.dynamic?s.output:_(s.output,u)),i=void 0===v?_("m(\"#text\", '')",u):!0===v.dynamic?v.output:_(v.output,u),t.value+" ? "+d+" : "+i}},r["m-for"]={before:function(t,e,n,r){n.deep=!0;var o=t.value.split(" in "),i=o[0],a=o[1],s=r.locals;return t.data.forInfo=[a,i,s],r.locals=s.concat(i.split(",")),Z(a,r)},after:function(t,e,n,r,o){var i=t.data.forInfo;return o.locals=i[2],"m.renderLoop("+i[0]+", function("+i[1]+") {return "+e+";})"}},r["m-on"]={before:function(t,e,n,r){var o=r.exclude,i=t.value;-1===i.indexOf("(")&&(i+="()"),F(t.argument,"function(event) {"+i+";}",e),o.push("event");var a=Z(i,r);return o.pop(),a}},r["m-bind"]={before:function(t,e,n,r){var o,i,a=t.value,s=a.search(H);-1!==s&&(a='instance.get("'+(o=a.substring(0,s))+'")'+(i=a.substring(s)));var v="event.target.value",d=a,u="";return u=-1===s?'function(event) {instance.set("'+a+'", '+v+");}":'function(event) {var boundValue = instance.get("'+o+'");boundValue'+i+" = "+v+';instance.set("'+o+'", boundValue);}',F("input",u,e),P("value",d,e),Z(a,r)}},r["m-literal"]={during:function(t,e,n,r){var o=t.argument.split("."),i=o.shift(),a=t.value,s=void 0;return"dom"===o[0]?(P(i,a,e),s):(s="class"===i?'"class": m.renderClass('+a+")":'"'+i+'": '+a,{output:s,dynamic:Z(a,r)})}},r["m-mask"]={},e});